import{d as U,r as $,b as P,w as Z,n as q,e as A,f as R,g as E,o as b,c as T,h as _,F as X,i as K,j as G,k as Q,u as N,l as Y,m as tt,v as et,p as r,q as f,t as M,s as V,_ as st,x as at,y as C,z as w}from"./app.ddbd32bb.js";const nt={list:{type:[],default:()=>[]},type:{type:String,default:()=>"flex"},cols:{type:Number,default:()=>2},minWidth:{type:Number,default:()=>0},wrapHeight:{type:String,default:()=>"auto"},rowGap:{type:String,default:()=>"0px"},colGap:{type:String,default:()=>"0px"},scrollAwait:{type:Number,default:()=>100}},lt={"scroll-end":()=>null};const ot=["src"],it=U({__name:"waterfall",props:nt,emits:lt,setup(k,{emit:g}){const t=k;let c=t.cols;const n=$(),u=P([]);let x=$("auto");const S=()=>Math.random().toString(16).substring(2),H=$(0),z=$("0px");Z(()=>t.list.length,s=>{s&&setTimeout(()=>{l()},0)});const L=async s=>Promise.all(s.map(a=>new Promise(o=>{let d=new Image;d.src=(a==null?void 0:a.src)||"",d.onload=()=>{o()},d.onerror=()=>{o()}}))),l=(s=!0)=>{let a=n.value.clientWidth;a=a-(Math.floor(a/t.minWidth)-1)*parseInt(t.colGap),t.minWidth&&(c=Math.floor(a/t.minWidth)),c!==Math.floor(n.value.clientWidth/t.minWidth)&&(a=n.value.clientWidth-(Number(c)-1)*parseInt(t.colGap)),H.value=c;const o=a/Number(c)+"px";z.value=o,a=n.value.clientWidth,u.length=0,u.push(...t.list.map(d=>({src:d.src,_uuid:S(),_order:0,_width:o,_minWidth:t.minWidth+"px",...d}))),q(async()=>{s&&await L(u);const d=n.value.querySelectorAll(".f-waterfall__block");let j=Object.values(d).map((i,p)=>({height:i.clientHeight,index:p}));const W=Array(c).fill(null).map(()=>[]);j=j.sort((i,p)=>p.height-i.height),j.forEach(i=>{W.reduce((v,h)=>v.reduce((D,y)=>D+((y==null?void 0:y.height)||0),0)<h.reduce((D,y)=>D+((y==null?void 0:y.height)||0),0)?v:h,W[0]).push({...i})});const J=W.reduce((i,p)=>i.reduce((v,h)=>v+((h==null?void 0:h.height)||0),0)>p.reduce((v,h)=>v+((h==null?void 0:h.height)||0),0)?i:p,W[0]);x.value=J.reduce((i,p)=>i+Number(p.height),0)+"px",W.flat(1).reverse().forEach((i,p)=>{const v=u[(i==null?void 0:i.index)||0];v._order=p})})};let e=null;const m=()=>{e&&clearTimeout(e),e=setTimeout(()=>{l(!1)},10)};A(async()=>{window.onresize=m,l()}),R(()=>{window.removeEventListener("resize",m)});const B=s=>{const a=s.target.clientHeight,o=Math.ceil(s.target.scrollTop),d=s.target.scrollHeight;e&&clearTimeout(e),e=setTimeout(()=>{a+o>=d&&g("scroll-end")},t.scrollAwait)},F=E(()=>{const{type:s}=t;return[`f-waterfall__${s}`,"f-waterfall"]}),I=E(()=>{const{wrapHeight:s}=t;return{height:s}}),O=E(()=>{const{rowGap:s,colGap:a}=t;return{"--f-col-count":H.value,"--f-col-width":z.value,"--f-row-gap":s,height:t.type==="flex"?x.value:"auto","row-gap":s,"column-gap":a}});return(s,a)=>(b(),T("div",{style:G(N(I)),class:"f-waterfall__wrap",onScroll:B},[_("div",{ref_key:"waterfall",ref:n,class:Y(N(F)),style:G(N(O))},[(b(!0),T(X,null,K(N(u),(o,d)=>(b(),T("div",{key:`waterfall_${d}`,class:"f-waterfall__block",style:G({order:t.type==="flex"&&o._order,minWidth:t.type==="flex"&&o._minWidth,width:t.type==="flex"&&o._width})},[Q(s.$slots,"default",{row:o},()=>[_("img",{src:o.src},null,8,ot)])],4))),128))],6)],36))}});const rt={class:"feedback"},ct={class:"input-ctl"},dt={class:"material input__box"},_t=_("label",{class:"input__label"},"\u8BF4\u70B9\u4EC0\u4E48",-1),ut={class:"card"},pt={class:"msg"},ht={class:"time"},ft={__name:"Feedback",setup(k){const g=$(""),t=P([]);let c=10;const n=1;let u=0;const x=async(l,e)=>await fetch(l,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(m=>m.json()),S=async()=>{const l=await fetch(`https://e2625ac1-6ce5-473a-8f15-04f5ae12964e.bspapp.com/gz/message?current=${n}&size=${c}`).then(e=>e.json());l.status&&(u=l.result.affectedDocs,l.result.data.forEach(e=>e.time=new Date(e.create_time).toLocaleDateString()+" "+new Date(e.create_time).toLocaleTimeString()),t.length=0,t.unshift(...l.result.data))},H=()=>{console.log("end")},z=async()=>{const l=g.value;if(!l.trim()){V.warning("\u8BF7\u5148\u586B\u5199\u5185\u5BB9");return}g.value="",(await x("https://e2625ac1-6ce5-473a-8f15-04f5ae12964e.bspapp.com/gz/message",{msg:l,type:"add"})).status&&(c=0,S())},L=()=>{if(u<=c){V.warning("\u6CA1\u6709\u66F4\u591A\u4E86");return}c+=10,S()};return A(()=>{S()}),(l,e)=>(b(),T("div",rt,[_("div",ct,[_("div",dt,[tt(_("input",{class:"input__fill",placeholder:"1","onUpdate:modelValue":e[0]||(e[0]=m=>g.value=m)},null,512),[[et,g.value]]),_t]),_("button",{class:"send",onClick:z},"\u53D1\u9001")]),r(it,{type:"column",wrapHeight:"auto",minWidth:0,cols:1,list:t,onScrollEnd:H},{default:f(({row:m})=>[_("div",ut,[_("div",pt,[_("span",null,M(m.msg),1),_("span",ht,M(m.time),1)])])]),_:1},8,["list"]),_("div",{class:"more",onClick:L},"\u66F4\u591A")]))}};const mt=w("\u{1F383} \u4E0D\u8981\u60E7\u6015\u5199\u51FA\u4E0D\u5B8C\u7F8E\u7684\u4EE3\u7801\uFF0C\u53EA\u8981\u5728\u540E\u7EED\u8FED\u4EE3\u8FC7\u7A0B\u4E2D\u201C\u89C1\u62DB\u62C6\u62DB\u201D\uFF0C\u4EE3\u7801\u5C31\u4F1A\u53D8\u5F97\u8D8A\u6765\u8D8A\u5B8C\u5584\uFF0C\u6846\u67B6\u4E5F\u4F1A\u53D8\u5F97\u8D8A\u6765\u8D8A\u5065\u58EE\u3002"),gt=w("\u5185\u5BB9"),vt=w("\u26A1 \u8BB0\u5F55 JavaScript \u7684\u5404\u79CD\u65B9\u6CD5"),yt=w("\u{1F332} Vue2 \u548C Vue3 \u7684\u4E00\u4E9B\u4F7F\u7528"),wt=w("\u{1F4CC} TypeScript \u57FA\u7840"),xt=w("\u{1F528} java \u76F8\u5173"),bt=w("\u{1F3C6} \u524D\u7AEF\u9762\u8BD5\u9898"),St={__name:"Home",setup(k){return(g,t)=>{const c=C("f-avatar"),n=C("f-text"),u=C("f-divider"),x=C("f-main");return b(),at(x,null,{default:f(()=>[r(n,{center:""},{default:f(()=>[r(c,{size:160,round:"",src:"https://www.helloimg.com/images/2022/10/04/ZUXPTT.jpg"})]),_:1}),r(u,{margin:"32px",color:"rgb(224, 224, 224)"}),r(n,null,{default:f(()=>[mt]),_:1}),r(u,{margin:"32px",color:"rgb(224, 224, 224)"}),r(n,{bold:""},{default:f(()=>[gt]),_:1}),r(n,null,{default:f(()=>[vt]),_:1}),r(n,null,{default:f(()=>[yt]),_:1}),r(n,null,{default:f(()=>[wt]),_:1}),r(n,null,{default:f(()=>[xt]),_:1}),r(n,null,{default:f(()=>[bt]),_:1}),r(ft)]),_:1})}}};var Wt=st(St,[["__scopeId","data-v-0e227051"]]);const Ht=JSON.parse('{"title":"GZ","description":"","frontmatter":{"layout":"home","title":"GZ"},"headers":[],"relativePath":"index.md"}'),$t={name:"index.md"},zt=Object.assign($t,{setup(k){return(g,t)=>(b(),T("div",null,[r(Wt)]))}});export{Ht as __pageData,zt as default};
